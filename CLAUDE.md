# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

CLI-based Pomodoro Timer (Node.js) with system notifications and audio alerts. Installed globally via npm as the `timer-pomodoro` command. Messages and notifications are in Korean.

## Build & Development Commands

```bash
npm install                # Install dependencies
npm run compile            # Babel ES6→ES5: src/ → lib/
npm run compile:watch      # Compile with file watching
npm start                  # Run compiled app (lib/app.js)
npm test                   # Run Jest tests
npm run lint               # Standard.js linter with --fix
npm run coverage           # Jest coverage report
npm run release:patch      # lint + compile + version bump + publish
```

Run a single test:
```bash
npx jest test/TimerPomodoro.test.js
```

## Architecture

**Source in `src/` (ES6), compiled output in `lib/` (ES5 via Babel with es2015 preset).**

- `src/app.js` — Entry point. Parses CLI args with `commander`, creates `TimerPomodoro` instance, handles SIGINT.
- `src/TimerPomodoro.js` — Core class. Manages pomodoro cycles: countdown → notification → break → repeat. Uses `timrjs` for timers, `node-notifier` for system popups.
- `src/FileUtils.js` — Static utility for copying sound files to `~/Library/Sounds/`.
- `src/constants.js` — All configuration: default times, notification messages (Korean), image/sound file paths, string templates.

**Flow:** CLI args → `TimerPomodoro(config)` → recursive `run()` cycling through work/break sessions → system notifications + sound at transitions.

## Key Details

- Sound files (MP3) are copied to platform-specific sound directory at runtime (macOS: `~/Library/Sounds/`, Linux: `~/.local/share/sounds/`)
- Notification images in `images/` directory (pomodoro.png, break1-4.png)
- The `lib/` directory is gitignored and generated by `npm run compile`
- Package bin entry maps `timer-pomodoro` CLI command to `lib/app.js`
- Test framework: Jest (with babel-jest + @babel/preset-env)
